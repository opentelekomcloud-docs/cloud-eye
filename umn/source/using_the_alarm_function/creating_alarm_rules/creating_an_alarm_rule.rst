:original_name: en-us_topic_0084572213.html

.. _en-us_topic_0084572213:

Creating an Alarm Rule
======================

Cloud Eye allows you to use alarm templates to create alarm rules, making it easy and convenient to add or modify alarm rules for resources or cloud services, especially for a large number of resources and cloud services.

This topic describes how to create an alarm rule.


Creating an Alarm Rule
----------------------

#. Log in to the management console.
#. In the upper left corner, select a region and project.
#. Click **Service List** in the upper left corner and select **Cloud Eye**.
#. In the navigation pane on the left, choose **Alarm Management** > **Alarm Rules**.
#. Click **Create Alarm Rule** in the upper right corner.
#. On the **Create Alarm Rule** page, configure the parameters.

   a. Configure the alarm rule name and description.

      .. _en-us_topic_0084572213__table17694105411317:

      .. table:: **Table 1** **Name** and **Description**

         +-----------------------------------+------------------------------------------------------------------------------------------+
         | Parameter                         | Description                                                                              |
         +===================================+==========================================================================================+
         | Name                              | Specifies the alarm rule name. The system generates a random name, which you can modify. |
         |                                   |                                                                                          |
         |                                   | Example value: **alarm-b6al**                                                            |
         +-----------------------------------+------------------------------------------------------------------------------------------+
         | Description                       | (Optional) Provides supplementary information about the alarm rule.                      |
         +-----------------------------------+------------------------------------------------------------------------------------------+

   b. Select a monitored object and configure alarm content parameters.

      .. table:: **Table 2** Configuring metric alarms

         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Parameter             | Description                                                                                                                                                                                                                                                                                                                                                    | Example Value         |
         +=======================+================================================================================================================================================================================================================================================================================================================================================================+=======================+
         | Alarm Type            | Specifies the alarm type that the alarm rule applies. The value can be **Metric**.                                                                                                                                                                                                                                                                             | Metric                |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Resource Type         | Specifies the type of the resource the alarm rule is created for.                                                                                                                                                                                                                                                                                              | Elastic Cloud Server  |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Dimension             | Specifies the metric dimension of the selected resource type.                                                                                                                                                                                                                                                                                                  | ECSs                  |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Monitoring Scope      | Specifies the monitoring scope the alarm rule applies to. You can select **Resource groups** or **Specific resources**.                                                                                                                                                                                                                                        | Specific resources    |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       | .. note::                                                                                                                                                                                                                                                                                                                                                      |                       |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       |    -  If **Resource groups** is selected and any resource in the group meets the alarm policy, an alarm is triggered.                                                                                                                                                                                                                                          |                       |
         |                       |    -  If you select **Specific resources**, select one or more resources and click to add them to the box on the right.                                                                                                                                                                                                                                        |                       |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Group                 | This parameter is mandatory when **Monitoring Scope** is set to **Resource groups**.                                                                                                                                                                                                                                                                           | N/A                   |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Method                | There are two options: **Use existing template** or **Configure manually**. If **Event** is selected for **Alarm Type**, **Method** is set to **Configure manually** by default.                                                                                                                                                                               | Configure manually    |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Template              | Specifies the template to be used.                                                                                                                                                                                                                                                                                                                             | ECS Alarm Template    |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       | You can select a default alarm template or customize a template.                                                                                                                                                                                                                                                                                               |                       |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Alarm Policy          | Specifies the policy for triggering an alarm.                                                                                                                                                                                                                                                                                                                  | N/A                   |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       | When **Alarm Type** is set to **Metric** and **Resource Type** is set to a cloud service, whether to trigger an alarm depends on whether the data in the specified consecutive periods reaches the threshold. For example, Cloud Eye triggers an alarm if the average CPU usage of the monitored object is 80% or more for three consecutive 5-minute periods. |                       |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       | .. note::                                                                                                                                                                                                                                                                                                                                                      |                       |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       |    A maximum of 50 alarm policies can be added to an alarm rule. If any one of these alarm policies is met, an alarm is triggered.                                                                                                                                                                                                                             |                       |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Metric                | Example:                                                                                                                                                                                                                                                                                                                                                       | CPU Usage             |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       | -  CPU Usage                                                                                                                                                                                                                                                                                                                                                   |                       |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       |    CPU usage of the monitored object in percent.                                                                                                                                                                                                                                                                                                               |                       |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       | -  Memory Usage                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       |    Memory usage of the monitored object in percent.                                                                                                                                                                                                                                                                                                            |                       |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Alarm Policy          | Specifies the policy for triggering an alarm.                                                                                                                                                                                                                                                                                                                  | N/A                   |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       | For example, an alarm is triggered if the average value of the monitored metric is 80% or more for three consecutive 5-minute periods.                                                                                                                                                                                                                         |                       |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Alarm Severity        | Specifies the alarm severity, which can be **Critical**, **Major**, **Minor**, or **Informational**.                                                                                                                                                                                                                                                           | Major                 |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+
         | Mount Point or Disk   | This parameter is displayed on the console and can be configured only when the following conditions are met:                                                                                                                                                                                                                                                   | /dev                  |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       | -  **Monitoring Scope**: **Specific resources**                                                                                                                                                                                                                                                                                                                |                       |
         |                       | -  **Resource Type**: ECSs or BMSs                                                                                                                                                                                                                                                                                                                             |                       |
         |                       | -  **Method**: **Configure manually**.                                                                                                                                                                                                                                                                                                                         |                       |
         |                       | -  **Metric Name** in an alarm policy: disk metric whose name is prefixed with **Agent**                                                                                                                                                                                                                                                                       |                       |
         |                       |                                                                                                                                                                                                                                                                                                                                                                |                       |
         |                       | For the Windows OS, enter a drive letter, such as **C**, **D**, or **E**. For the Linux OS, enter a mount point, such as **/dev** or **/opt**.                                                                                                                                                                                                                 |                       |
         +-----------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------+

      .. table:: **Table 3** Configuring event alarms

         +-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
         | Parameter             | Description                                                                                                                                                                  | Example Value                                                                           |
         +=======================+==============================================================================================================================================================================+=========================================================================================+
         | Alarm Type            | Specifies the alarm type that the alarm rule applies. The value can be **Event**.                                                                                            | Event                                                                                   |
         +-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
         | Event Type            | Specifies the event type, which can be **System event** or **Custom event**.                                                                                                 | Custom event                                                                            |
         +-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
         | Event Source          | Specifies the service the event is generated for.                                                                                                                            | Elastic Cloud Server                                                                    |
         +-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
         | Method                | If **Event** is selected for **Alarm Type**, **Method** is set to **Configure manually** by default.                                                                         | Configure manually                                                                      |
         +-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
         | Alarm Policy          | Specifies the policy for triggering an alarm.                                                                                                                                | N/A                                                                                     |
         |                       |                                                                                                                                                                              |                                                                                         |
         |                       | If **Alarm Type** is set to **Event** and a specific event occurs, Cloud Eye triggers an alarm. For example, if the event **Reboot ECS** occurs, an alarm will be triggered. |                                                                                         |
         |                       |                                                                                                                                                                              |                                                                                         |
         |                       | .. note::                                                                                                                                                                    |                                                                                         |
         |                       |                                                                                                                                                                              |                                                                                         |
         |                       |    A maximum of 50 alarm policies can be added to an alarm rule. If any one of these alarm policies is met, an alarm is triggered.                                           |                                                                                         |
         +-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
         | Event Name            | Specifies the event name.                                                                                                                                                    | ECS deleted                                                                             |
         |                       |                                                                                                                                                                              |                                                                                         |
         |                       | For events supported by event monitoring, see :ref:`Events Supported by Event Monitoring <ces_01_0054>`.                                                                     |                                                                                         |
         +-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
         | Trigger Mode          | You can select **Immediate trigger** or **Accumulative trigger** based on the operation severity.                                                                            | Immediate trigger                                                                       |
         |                       |                                                                                                                                                                              |                                                                                         |
         |                       | -  **Immediate trigger**: An alarm is triggered once an event occurs.                                                                                                        |                                                                                         |
         |                       | -  **Accumulative trigger**: An alarm is only triggered when the number of times an event occurs meets the preset value.                                                     |                                                                                         |
         +-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
         | Alarm Policy          | Specifies the policy for triggering an alarm.                                                                                                                                | An alarm is triggered if the event occurred for three consecutive periods of 5 minutes. |
         |                       |                                                                                                                                                                              |                                                                                         |
         |                       | .. note::                                                                                                                                                                    |                                                                                         |
         |                       |                                                                                                                                                                              |                                                                                         |
         |                       |    This parameter is mandatory when **Trigger Mode** is set to **Accumulative trigger**.                                                                                     |                                                                                         |
         +-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
         | Alarm Severity        | Specifies the alarm severity, which can be **Critical**, **Major**, **Minor**, or **Informational**.                                                                         | Major                                                                                   |
         +-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+
         | Operation             | You can click **Delete** to delete an alarm policy.                                                                                                                          | Delete                                                                                  |
         +-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+

   c. Configure the alarm notification.


      .. figure:: /_static/images/en-us_image_0000001940391649.png
         :alt: **Figure 1** Alarm Notification

         **Figure 1** Alarm Notification

      .. _en-us_topic_0084572213__table54161352427:

      .. table:: **Table 4** **Alarm Notification** parameters

         +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Parameter                         | Description                                                                                                                                                                                                                                                                                                |
         +===================================+============================================================================================================================================================================================================================================================================================================+
         | Alarm Notification                | Specifies whether to notify users when alarms are triggered. Notifications can be sent by email, SMS message, or HTTP/HTTPS message.                                                                                                                                                                       |
         +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Notification Object               | Specifies the object to which alarm notifications will be sent. You can select the account contact or a topic.                                                                                                                                                                                             |
         |                                   |                                                                                                                                                                                                                                                                                                            |
         |                                   | -  The account contact is the tenant owner. If a user registers both a mobile number and an email address, they will receive alarm information through both channels. However, if only one of these contact methods is registered, the alarm information will be sent exclusively to that registered one.  |
         |                                   | -  A topic is a specific event type for publishing messages or subscribing to notifications. If the required topic is not available, create one first and add subscriptions to it. For details, :ref:`Creating a Topic <en-us_topic_0085216039>` and :ref:`Adding Subscriptions <en-us_topic_0084572343>`. |
         +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Validity Period                   | Cloud Eye sends notifications only within the notification window specified in the alarm rule.                                                                                                                                                                                                             |
         |                                   |                                                                                                                                                                                                                                                                                                            |
         |                                   | If **Validity Period** is set to **08:00-20:00**, Cloud Eye sends notifications only from 08:00 to 20:00.                                                                                                                                                                                                  |
         +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Trigger Condition                 | Specifies the condition for triggering an alarm notification.                                                                                                                                                                                                                                              |
         |                                   |                                                                                                                                                                                                                                                                                                            |
         |                                   | -  If **Alarm Type** is set to **Metric**, you can select **Generated alarm**, **Cleared alarm**, or both.                                                                                                                                                                                                 |
         |                                   | -  If **Alarm Type** is set to **Event**, you can select **Generated alarm** only.                                                                                                                                                                                                                         |
         +-----------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

   d. (Optional) Select an enterprise project.


      .. figure:: /_static/images/en-us_image_0000001693213709.png
         :alt: **Figure 2** Advanced Settings

         **Figure 2** Advanced Settings

      .. table:: **Table 5** **Name** and **Description**

         +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+
         | Parameter          | Description                                                                                                                                             |
         +====================+=========================================================================================================================================================+
         | Enterprise Project | Specifies the enterprise project that the alarm rule belongs to. Only users with the enterprise project permissions can view and manage the alarm rule. |
         +--------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------+

   e. Click **Create**.

After the alarm rule is created, if the metric data reaches the specified threshold or the specified events reach the alarm policies, Cloud Eye immediately informs you that an exception has occurred.

You can choose **Alarm Management** > **Alarm Records** and click **View Details** to view recent alarms.
